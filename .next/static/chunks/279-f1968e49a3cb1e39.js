(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{67:function(){},2061:function(){},1112:function(e,t,n){"use strict";n.d(t,{Bq:function(){return o},Em:function(){return a},T2:function(){return m},jm:function(){return l},pt:function(){return i},r:function(){return u},wV:function(){return r},yZ:function(){return s}});let a=.085,r=.085,u=.085,o=.085,s={min:.03,max:.02},l={min:3e4,max:2e4},m=.055,i={"gender-male":0,"gender-female":-.01,"age-18-25":0,"age-26-35":.01,"age-36-45":.02,"age-46-50":.03,"age-51-56":.045,"age-57-65":.06}},4290:function(e,t,n){"use strict";n.d(t,{B8:function(){return o},Eh:function(){return l},gN:function(){return u},gr:function(){return s}});var a=n(1112);let r={BASE_DISCOUNT_RATE:a.Em,BASE_DISCOUNT_RATE_LCP:a.wV,BASE_DISCOUNT_RATE_LUMP_SUM_GUARANTEED:a.r,BASE_DISCOUNT_RATE_LUMP_SUM_LCP:a.Bq,RATE_SPREADS:a.yZ,AMOUNT_ADJUSTMENTS:a.jm,FAMILY_PROTECTION_DISCOUNT_RATE:a.T2,PAYMENT_FREQUENCY:"Monthly",PAYMENT_INCREASE_RATE:0,DEFAULT_PAYMENT_FREQUENCY:"Monthly",DEFAULT_ANNUAL_INCREASE:0,adjustmentMap:{...a.pt}},u={...r};function o(){return u}function s(e){u={...u,...e},e.adjustmentMap&&(u.adjustmentMap={...u.adjustmentMap,...e.adjustmentMap}),localStorage.setItem("npv-runtime-config",JSON.stringify(u))}function l(){u={...r},localStorage.removeItem("npv-runtime-config")}{let e=localStorage.getItem("npv-runtime-config");if(e)try{let t=JSON.parse(e);u={...r,...t},t.adjustmentMap&&(u.adjustmentMap={...r.adjustmentMap,...t.adjustmentMap})}catch(e){console.error("Failed to load runtime config from localStorage:",e),u={...r}}}},7780:function(e,t,n){"use strict";function a(e){return!!(e.gender&&e.age&&e.typeOfPayment&&e.paymentStartDate&&e.paymentEndDate&&e.paymentAmount&&parseFloat(e.paymentAmount)>0)}n.d(t,{m6:function(){return y},CY:function(){return c},_H:function(){return i},$z:function(){return p},pq:function(){return E},P0:function(){return s},g9:function(){return d},p:function(){return w},dE:function(){return u},pH:function(){return o},v2:function(){return a},mf:function(){return A}});var r=n(4290);function u(e,t){let n=[];return"male"===t?n.push("gender-male"):"female"===t&&n.push("gender-female"),e>=18&&e<=25?n.push("age-18-25"):e>=26&&e<=35?n.push("age-26-35"):e>=36&&e<=45?n.push("age-36-45"):e>=46&&e<=50?n.push("age-46-50"):e>=51&&e<=56?n.push("age-51-56"):e>=57&&e<=65&&n.push("age-57-65"),n}function o(e,t){let n=0;return"male"===t?n+=r.gN.adjustmentMap["gender-male"]||0:"female"===t&&(n+=r.gN.adjustmentMap["gender-female"]||0),e>=18&&e<=25?n+=r.gN.adjustmentMap["age-18-25"]||0:e>=26&&e<=35?n+=r.gN.adjustmentMap["age-26-35"]||0:e>=36&&e<=45?n+=r.gN.adjustmentMap["age-36-45"]||0:e>=46&&e<=50?n+=r.gN.adjustmentMap["age-46-50"]||0:e>=51&&e<=56?n+=r.gN.adjustmentMap["age-51-56"]||0:e>=57&&e<=65&&(n+=r.gN.adjustmentMap["age-57-65"]||0),n}function s(e){return e>=18&&e<=25?"18-25":e>=26&&e<=35?"26-35":e>=36&&e<=45?"36-45":e>=46&&e<=50?"46-50":e>=51&&e<=56?"51-56":e>=57&&e<=65?"57-65":"unknown"}var l=n(1112);function m(e){let{amount:t,startDate:n,endDate:a,annualRate:r,paymentMode:u,increaseRate:o=0}=e,s=new Date(n),l=new Date(a),m=new Date;m.setHours(0,0,0,0);let i={Monthly:12,Quarterly:4,Semiannually:2,Annually:1,"Lump Sum":1}[u]||12,c=12/i,d=0,p=t,y=0;for(let e=new Date(s);e<=l&&("Lump Sum"!==u||!(y>0));e=function(e,t){let n=new Date(e),a=n.getDate();return n.setMonth(n.getMonth()+t),n.getDate()<a&&n.setDate(0),n}(e,c),y++){let t=(e.getFullYear()-m.getFullYear())*12+(e.getMonth()-m.getMonth());t>=0&&(d+=p/Math.pow(1+r/12,t)),(y+1)%i==0&&(p*=1+o/100)}return{npv:parseFloat(d.toFixed(2)),payments:y}}function i(e,t,n,a,u,o,s,i){return function(e){let{amount:t,startDate:n,endDate:a,baseRate:r=l.Em,paymentMode:u,increaseRate:o=0,minRateSpread:s=l.yZ.min,maxRateSpread:i=l.yZ.max,minAdjustment:c=0,maxAdjustment:d=0,isLCP:p=!1,lcpKeys:y=[]}=e,f=p?y.reduce((e,t)=>e+(l.pt[t]||0),0):0,g=m({amount:t,startDate:n,endDate:a,annualRate:r+f+s,paymentMode:u,increaseRate:o}),h=m({amount:t,startDate:n,endDate:a,annualRate:r+f+i,paymentMode:u,increaseRate:o}),A=e=>100*Math.ceil((e-.001)/100);return{minOffer:Math.max(0,A(g.npv-c)),maxOffer:Math.max(0,A(h.npv-d))}}({amount:e,startDate:t,endDate:n,baseRate:a,paymentMode:s||r.gN.PAYMENT_FREQUENCY,increaseRate:void 0!==i?i:r.gN.PAYMENT_INCREASE_RATE,minRateSpread:r.gN.RATE_SPREADS.min,maxRateSpread:r.gN.RATE_SPREADS.max,minAdjustment:r.gN.AMOUNT_ADJUSTMENTS.min,maxAdjustment:r.gN.AMOUNT_ADJUSTMENTS.max,isLCP:!1,lcpKeys:[]})}function c(e,t,n,a,u){let o=a||r.gN.PAYMENT_FREQUENCY,s=void 0!==u?u:r.gN.PAYMENT_INCREASE_RATE;return function(e){let{amount:t,startDate:n,endDate:a,discountRate:r,paymentMode:u,increaseRate:o=0}=e;return m({amount:t,startDate:n,endDate:a,annualRate:r/100,paymentMode:u,increaseRate:o})}({amount:e,startDate:t,endDate:n,discountRate:r.gN.FAMILY_PROTECTION_DISCOUNT_RATE,paymentMode:o,increaseRate:s}).npv}function d(e){return"LCP"===e?r.gN.BASE_DISCOUNT_RATE_LCP:r.gN.BASE_DISCOUNT_RATE}function p(e,t,n){if(!e||!t||!n)return 0;let a=new Date(e),r=new Date(t),u=12/(({Monthly:12,Quarterly:4,Semiannually:2,"Semi-Annually":2,Annually:1,"Lump Sum":1})[n]||12);if("Lump Sum"===n)return 1;let o=0;for(let e=new Date(a);e<=r;e=function(e,t){let n=new Date(e),a=n.getDate();return n.setMonth(n.getMonth()+t),n.getDate()<a&&n.setDate(0),n}(e,u),o++);return o}function y(e,t,n,a,u){let o=a||r.gN.PAYMENT_FREQUENCY,s=void 0!==u?u:r.gN.PAYMENT_INCREASE_RATE,l=r.gN.FAMILY_PROTECTION_DISCOUNT_RATE,m=new Date(t),i=new Date(n),c={Monthly:12,Quarterly:4,Semiannually:2,"Semi-Annually":2,Annually:1,"Lump Sum":1}[o]||12,d=12/c,p=[],y=e,f=0;for(let e=new Date(m);e<=i&&("Lump Sum"!==o||!(f>0));e=function(e,t){let n=new Date(e),a=n.getDate();return n.setMonth(n.getMonth()+t),n.getDate()<a&&n.setDate(0),n}(e,d),f++)p.push({date:new Date(e),amt:y}),(f+1)%c==0&&(y*=1+s/100);let g=0;for(let e=0;e<p.length;e++){let t=0,n=p[e].date;for(let a=e;a<p.length;a++){let e=p[a],r=Math.pow(1+l/12,(e.date.getFullYear()-n.getFullYear())*12+(e.date.getMonth()-n.getMonth()));t+=e.amt/r}t>g&&(g=t)}return parseFloat((1e4*Math.ceil((g+2e4-.001)/1e4)).toFixed(2))}let f={gender:["gender","sex","gender/sex","male/female","m/f","Gender","Sex","Gender/Sex","Male/Female","M/F"],age:["age","age at issue","current age","age (years)","Age","Age at Issue","Current Age","Age (Years)"],firstName:["first name","firstname","first","fname","name first","given name","First Name","FirstName","First","FName","Name First","Given Name"],lastName:["last name","lastname","last","lname","surname","name last","family name","Last Name","LastName","Last","LName","Surname","Name Last","Family Name"],insuranceCompany:["insurance company","ins company","ins co","carrier","insurance carrier","company","Insurance Company","insurance_company","ins_carrier","carrier_name","structured settlement carrier","annuity carrier"],typeOfPayment:["payment type","payment","pymt type","type","structure type","lcp/gp","Payment Type","payment_type","structure_type","payout_type","annuity_type","settlement_type"],paymentFrequency:["payment frequency","frequency","freq","how often","payment freq","Payment Frequency","payment_frequency","frequency_type","freq_type"],paymentStartDate:["start date","start","begin date","payment start","commencement date","Payment Start Date","payment start date","start_date","startdate","begin_date","begindate","commencement_date","commencementdate","payment start date","paymentstartdate"],paymentEndDate:["end date","end","maturity date","payment end","termination date","Payment End Date","payment end date","end_date","enddate","maturity_date","maturitydate","termination_date","terminationdate","payment end date","paymentenddate"],paymentAmount:["amount","payment amount","monthly amount","payment","payout amount","Payment Amount","payment_amount","amount_paid","monthly_payment","payout","settlement amount","structured settlement amount","payment amount","paymentamount"],annualIncrease:["annual increase","increase","increase %","increase rate","ann inc","col %","Annual Increase","Increase","Increase %","Increase Rate","Ann Inc","Col %","annual_increase","increase_rate","annual_inc","col_percent"],crmId:["crm id","crm","lead id","record id","crm_id","Lead ID","CRM ID"],phone1:["phone 1","phone1","primary phone","mobile","cell","Phone 1","Primary Phone"],phone2:["phone 2","phone2","secondary phone","alt phone","Phone 2","Secondary Phone"],phone3:["phone 3","phone3","other phone","alternate phone","Phone 3"],fullAddress:["address","full address","mailing address","Address","Full Address"],streetAddress1:["street 1","street1","address 1","address line 1","Street 1","Address 1","Address Line 1"],streetAddress2:["street 2","street2","address 2","address line 2","Street 2","Address 2","Address Line 2"],city:["city","City"],state:["state","st","State"],zipCode:["zip","zip code","zipcode","postal code","Zip","ZIP Code","Postal Code"]};function g(e){return e.toLowerCase().trim().replace(/[^a-z0-9]/g,"")}function h(e){let t=[],n="",a=!1;for(let r=0;r<e.length;r++){let u=e[r],o=e[r+1];'"'===u?a&&'"'===o?(n+='"',r++):a=!a:","!==u||a?n+=u:(t.push(n.trim()),n="")}return t.push(n.trim()),t}function A(e){let t={success:!1,data:[],errors:[],warnings:[]};try{let n=e.split("\n").filter(e=>e.trim());if(n.length<2)return t.errors.push("CSV must have at least header row and one data row"),t;n.length>1e4&&t.warnings.push("Large file detected. Processing may take longer.");let a=h(n[0]),r={};a.forEach((e,t)=>{let n=function(e,t){let n=g(e);for(let[e,a]of Object.entries(t))for(let t of a)if(g(t)===n)return e;return null}(e,f);n&&(r[t]=n)});let u=["gender","age","firstName","lastName","paymentAmount","paymentStartDate","paymentEndDate"].filter(e=>!Object.values(r).includes(e));if(u.length>0)return t.errors.push("Missing required fields: ".concat(u.join(", "),". Found headers: ").concat(a.join(", "))),t;let o=Object.values(r).includes("typeOfPayment"),s=Object.values(r).includes("paymentFrequency");o||t.warnings.push("Payment Type not found - defaulting to LCP for all rows"),s||t.warnings.push("Payment Frequency not found - defaulting to Monthly for all rows");let l=n.length-1;for(let e=1;e<n.length;e++){l>5e3&&e%1e3==0&&console.log("Processing row ".concat(e," of ").concat(l));let u=h(n[e]);if(u.length<a.length){t.warnings.push("Row ".concat(e+1,": Too few columns (expected ").concat(a.length,", got ").concat(u.length,")"));continue}u.length>a.length&&(u.length=a.length);let o={gender:"",age:"",firstName:"",lastName:"",insuranceCompany:"",typeOfPayment:"LCP",paymentFrequency:"Monthly",paymentStartDate:"",paymentEndDate:"",paymentAmount:"",annualIncrease:"0",crmId:"",phone1:"",phone2:"",phone3:"",fullAddress:"",streetAddress1:"",streetAddress2:"",city:"",state:"",zipCode:""};Object.entries(r).forEach(e=>{let[t,n]=e,a=parseInt(t);if(a<u.length){var r,s;let e=u[a];switch(n){case"gender":e=function(e){if(!e)return"";let t=g(e);return["m","male","man"].includes(t)?"male":["f","female","woman"].includes(t)?"female":e}(e);break;case"paymentFrequency":e=(r=e)?({monthly:"Monthly",quarterly:"Quarterly",quarter:"Quarterly",semi:"Semiannually",semiannually:"Semiannually","semi-annually":"Semiannually",annual:"Annually",annually:"Annually",yearly:"Annually",lump:"Lump Sum",lumpsum:"Lump Sum","one-time":"Lump Sum"})[g(r)]||r:"";break;case"typeOfPayment":e=function(e){if(!e)return"";let t=g(e);return["lcp","life","lifecontingent"].includes(t)?"LCP":["gp","guaranteed"].includes(t)?"GP":e}(e);break;case"annualIncrease":e=function(e){if(!e||""===e.trim())return"0";let t=parseFloat(e.replace(/[^0-9.-]/g,""));return isNaN(t)?"0":t>1&&t<=100?t.toString():t>0&&t<=1?(100*t).toString():"0"}(e);break;case"paymentAmount":e=(s=e)?s.replace(/[$,]/g,"").trim():"";break;case"paymentStartDate":case"paymentEndDate":e=function(e){if(!e)return"";for(let t of[/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})$/,/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/,/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/]){let n=e.trim().match(t);if(n){let e,a,r;if(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})$/===t?(a=parseInt(n[1]),r=parseInt(n[2]),e=2e3+parseInt(n[3])):/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})$/===t?(a=parseInt(n[1]),r=parseInt(n[2]),e=parseInt(n[3])):(e=parseInt(n[1]),a=parseInt(n[2]),r=parseInt(n[3])),a>=1&&a<=12&&r>=1&&r<=31&&e>=1900){let t=a.toString().padStart(2,"0"),n=r.toString().padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(n)}}}let t=new Date(e);return isNaN(t.getTime())?e:t.toISOString().split("T")[0]}(e)}o[n]=e}}),t.data.push(o)}t.success=!0;let m=t.warnings.filter(e=>!e.includes("Column count mismatch")&&!e.includes("Too few columns"));return t.warnings=m,t.data.length>0&&console.log("✅ Successfully parsed ".concat(t.data.length," rows from CSV")),t}catch(e){return t.errors.push("Parse error: ".concat(e)),t}}var N=n(7504);let _=["Gender","Age","First Name","Last Name","Insurance Company","Payment Type","Payment Frequency","Start Date","End Date","Amount","Annual Increase","Number of Payments","Low Range","High Range","Death Benefits","CRM ID","Phone 1","Phone 2","Phone 3","Full Address","Street Address 1","Street Address 2","City","State","ZIP Code"],S={Gender:"gender",Age:"age","First Name":"firstName","Last Name":"lastName","Insurance Company":"insuranceCompany","Payment Type":"typeOfPayment","Payment Frequency":"paymentFrequency","Start Date":"paymentStartDate","End Date":"paymentEndDate",Amount:"paymentAmount","Annual Increase":"annualIncrease","Number of Payments":"paymentCount","Low Range":"lowRange","High Range":"highRange","Death Benefits":"deathBenefits","CRM ID":"crmId","Phone 1":"phone1","Phone 2":"phone2","Phone 3":"phone3","Full Address":"fullAddress","Street Address 1":"streetAddress1","Street Address 2":"streetAddress2",City:"city",State:"state","ZIP Code":"zipCode"};function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{includeCalculations:n=!1,filename:a="pricing-sheet-export"}=t;try{let t=e.filter(e=>e.firstName&&e.lastName&&e.paymentAmount);if(0===t.length){alert("No valid data to export. Please ensure you have data with names and amounts.");return}let n=[];n.push(_),t.forEach(e=>{let t=[];_.forEach(n=>{let a=e[S[n]]||"";if("Gender"===n)a="male"===a?"Male":"female"===a?"Female":a;else if("Payment Type"===n)a="LCP"===a?"LCP":"GP"===a?"GP":a;else if("Payment Frequency"===n);else if("Amount"===n){let e=parseFloat(a.replace(/[,$]/g,""));a=isNaN(e)?a:"$".concat(e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))}t.push(a)}),n.push(t)});let r=N.utils.book_new(),u=N.utils.aoa_to_sheet(n);u["!cols"]=[{wch:8},{wch:6},{wch:15},{wch:15},{wch:20},{wch:12},{wch:15},{wch:12},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:12},{wch:15},{wch:12},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:15},{wch:8},{wch:10}],N.utils.book_append_sheet(r,u,"Pricing Data");let o=new Date().toISOString().slice(0,10),s="".concat(a,"-").concat(o,".xlsx");N.writeFile(r,s),console.log("✅ Exported ".concat(t.length," rows to ").concat(s))}catch(e){console.error("Export error:",e),alert("Export failed: ".concat(e))}}function w(e){let t=e.length,n=e.filter(e=>e.firstName&&e.lastName&&e.paymentAmount).length;return{totalRows:t,validRows:n,emptyRows:t-n}}},622:function(e,t,n){"use strict";var a=n(2265),r=Symbol.for("react.element"),u=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var a,l={},m=null,i=null;for(a in void 0!==n&&(m=""+n),void 0!==t.key&&(m=""+t.key),void 0!==t.ref&&(i=t.ref),t)u.call(t,a)&&!s.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:m,ref:i,props:l,_owner:o.current}}t.jsx=l,t.jsxs=l},7437:function(e,t,n){"use strict";e.exports=n(622)}}]);